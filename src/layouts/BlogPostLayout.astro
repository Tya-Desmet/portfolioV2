---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  description: string;
  publishedDate: Date;
  readingTime: number;
  author?: string;
  image?: string;
  excerpt?: string;
}

const { 
  title, 
  description, 
  publishedDate, 
  readingTime, 
  author = 'Mystya', 
  image,
  excerpt
} = Astro.props;

const formattedDate = publishedDate.toLocaleDateString('fr-FR', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<BaseLayout 
  title={`${title} - Blog Mystya`}
  description={excerpt || description} 
  image={image}
  canonicalURL={Astro.url.href}
>
  <article class="blog-post">
    <header class="article-header">
      <h1>{title}</h1>
      <div class="metadata">
        <time datetime={publishedDate.toISOString()}>{formattedDate}</time>
        <span>{readingTime} min de lecture</span>
        <span>Par {author}</span>
      </div>
    </header>
    
    <div class="article-content">
      <slot />
    </div>
    
    <!-- Social sharing buttons -->
    <div class="social-sharing">
      <h3>Partager cet article</h3>
      <div class="share-buttons">
        <a 
          href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(Astro.url.href)}`}
          target="_blank"
          rel="noopener noreferrer"
          class="share-btn linkedin"
          aria-label="Partager sur LinkedIn"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
          </svg>
          LinkedIn
        </a>
        <a 
          href={`https://twitter.com/intent/tweet?url=${encodeURIComponent(Astro.url.href)}&text=${encodeURIComponent(title)}`}
          target="_blank"
          rel="noopener noreferrer"
          class="share-btn twitter"
          aria-label="Partager sur Twitter"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
          </svg>
          Twitter
        </a>
      </div>
    </div>
    
    <!-- Navigation prev/next articles (placeholder) -->
    <nav class="article-nav" aria-label="Navigation articles">
      <!-- To be implemented with real article data in future stories -->
    </nav>
  </article>
</BaseLayout>

<style>
  .blog-post {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }
  
  .article-header {
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid var(--color-primary);
  }
  
  .article-header h1 {
    font-size: 2.5rem;
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin-bottom: 1rem;
    line-height: 1.2;
  }
  
  .metadata {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    color: var(--color-text-light);
    font-size: 0.9rem;
  }
  
  .metadata > * {
    display: flex;
    align-items: center;
  }
  
  .metadata time {
    font-weight: var(--font-weight-medium);
  }
  
  .article-content {
    line-height: 1.8;
    color: var(--color-text);
    font-size: 1.125rem;
  }
  
  .article-content :global(h2) {
    font-size: 2rem;
    font-weight: var(--font-weight-bold);
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    color: var(--color-primary);
  }
  
  .article-content :global(h3) {
    font-size: 1.5rem;
    font-weight: var(--font-weight-semibold);
    margin-top: 2rem;
    margin-bottom: 0.75rem;
    color: var(--color-text);
  }
  
  .article-content :global(p) {
    margin-bottom: 1.5rem;
  }
  
  .article-content :global(a) {
    color: var(--color-primary);
    text-decoration: underline;
    transition: color 0.2s ease;
  }
  
  .article-content :global(a:hover) {
    color: var(--color-secondary);
  }
  
  .article-content :global(code) {
    background: var(--color-surface);
    padding: 0.2em 0.4em;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
  }
  
  .article-content :global(pre) {
    background: var(--color-surface);
    padding: 1.5rem;
    border-radius: 8px;
    overflow-x: auto;
    margin: 1.5rem 0;
  }
  
  .article-content :global(pre code) {
    background: none;
    padding: 0;
  }
  
  .article-content :global(ul),
  .article-content :global(ol) {
    margin-bottom: 1.5rem;
    padding-left: 2rem;
  }
  
  .article-content :global(li) {
    margin-bottom: 0.5rem;
  }
  
  .social-sharing {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid var(--color-border);
  }
  
  .social-sharing h3 {
    font-size: 1.25rem;
    font-weight: var(--font-weight-semibold);
    margin-bottom: 1rem;
    color: var(--color-text);
  }
  
  .share-buttons {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }
  
  .share-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    font-weight: var(--font-weight-medium);
    text-decoration: none;
    transition: all 0.3s ease;
    color: white;
  }
  
  .share-btn svg {
    width: 20px;
    height: 20px;
  }
  
  .share-btn.linkedin {
    background: #0077b5;
  }
  
  .share-btn.linkedin:hover {
    background: #005582;
    transform: translateY(-2px);
  }
  
  .share-btn.twitter {
    background: #1da1f2;
  }
  
  .share-btn.twitter:hover {
    background: #0c85d0;
    transform: translateY(-2px);
  }
  
  .article-nav {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid var(--color-border);
  }
  
  @media (max-width: 768px) {
    .blog-post {
      padding: 1.5rem 1rem;
    }
    
    .article-header h1 {
      font-size: 2rem;
    }
    
    .article-content {
      font-size: 1rem;
    }
    
    .article-content :global(h2) {
      font-size: 1.5rem;
    }
    
    .article-content :global(h3) {
      font-size: 1.25rem;
    }
  }
</style>
